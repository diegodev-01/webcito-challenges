---
import { getProfileData, getUserRepos } from '@services/profile.service';

import Layout from '@/src/layouts/Layout.astro';
import Profile from '@components/sections/profile-aside/Profile.astro';
import Main from '@components/sections/main/Main.astro';

import '@/src/globals.css';

const username = Astro.url.searchParams.get('username');

const profileData = await getProfileData(username || 'diegodev-01');

const repoData = await getUserRepos(username || 'diegodev-01');
---

<Layout>
  <Profile data={profileData} />
  <Main repoCount={profileData.repos} repoData={repoData} />
</Layout>
